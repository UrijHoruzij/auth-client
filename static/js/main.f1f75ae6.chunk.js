(this["webpackJsonpauth-client"]=this["webpackJsonpauth-client"]||[]).push([[0],{23:function(e,t,n){"use strict";n.r(t);var r=n(21);t.default=Object(r.c)(["user"].reduce((function(e,t){return e[t]=n(91)("./".concat(t)).default,e}),{}))},40:function(e,t,n){"use strict";n.r(t);var r=n(17),a={data:null,isAuth:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case"USER:SET_DATA":return Object(r.a)(Object(r.a)({},e),{},{data:s,isAuth:!0});case"USER:SET_IS_AUTH":return Object(r.a)(Object(r.a)({},e),{},{isAuth:s});default:return e}}},91:function(e,t,n){var r={"./":23,"./index":23,"./index.js":23,"./user":40,"./user.js":40};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=91},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var r=n(1),a=(n(0),n(25)),s=n.n(a),i=n(20),u=n(29),c=n(2),o=n(33),l=n.n(o),p=(n(38),n(17)),d=n(7),h=n(12),f=n(4),j=n(6),b=n.n(j),O=n(11),m=n(28),v=function(e,t,n){return t[e]?n[e]?"error":"success":"default"},w=function(e){var t=e.isAuth,n=e.values,r=e.errors,a={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(r.email="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 E-Mail"):r.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-Mail"},password:function(e){e?t||/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/.test(e)||(r.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443, \u043e\u0434\u043d\u0443 \u043f\u0440\u043e\u043f\u0438\u0441\u043d\u0443\u044e \u0438 \u043e\u0434\u043d\u0443 \u0441\u0442\u0440\u043e\u0447\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443"):r.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},password_2:function(e){e?t||e===n.password||(r.password_2="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"):r.password_2="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u043f\u0430\u0440\u043e\u043b\u044c"},name:function(e){t||e||(r.fullname="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f")},lastname:function(e){t||e||(r.fullname="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u0444\u0430\u043c\u0438\u043b\u0438\u044e")}};Object.keys(n).forEach((function(e){return a[e]&&a[e](n[e])}))};function x(){var e=Object(h.a)(["\n  height: 44px;\n  margin-top: 16px;\n"]);return x=function(){return e},e}function g(){var e=Object(h.a)(["\n  text-decoration: none;\n  width: 100%;\n  outline: none;\n"]);return g=function(){return e},e}function S(){var e=Object(h.a)(["\n  height: 44px;\n  margin-top: 24px;\n"]);return S=function(){return e},e}function y(){var e=Object(h.a)(["\n  width: 100%;\n"]);return y=function(){return e},e}var A=Object(c.default)(f.Form)(y()),T=Object(c.default)(f.Button)(S()),k=Object(c.default)(i.b)(g()),_=Object(c.default)(f.Button)(x()),E=function(e){var t=e.values,n=e.touched,a=e.errors,s=e.handleChange,i=e.handleSubmit,u=e.isSubmitting;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.Typography,{type:"h1",children:"\u0412\u0445\u043e\u0434"}),Object(r.jsxs)(A,{onSubmit:i,children:[Object(r.jsx)(f.Input,{name:"email",placeholder:"E-Mail",value:t.email,onChange:s,status:v("email",n,a),help:n.email?a.email:""}),Object(r.jsx)(f.Input,{name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:t.password,onChange:s,status:v("password",n,a),help:n.password?a.password:""}),Object(r.jsx)(T,{fullWidth:!0,type:"primary",disabled:u,onClick:i,children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(r.jsx)(k,{to:"/signup",children:Object(r.jsx)(_,{fullWidth:!0,type:"outline",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})},U=n(47),I="https://urij.insomnia247.nl:5300",R=new U.a("".concat(I,"/refresh")),C={signIn:function(e){return R.signIn("".concat(I,"/signin"),e)},signUp:function(e){return R.http("".concat(I,"/signup"),"POST",e)},refresh:function(){return R.refresh()},logout:function(){return R.http("".concat(I,"/logout"),"POST")}},L={setUserData:function(e){return{type:"USER:SET_DATA",payload:e}},setIsAuth:function(e){return{type:"USER:SET_IS_AUTH",payload:e}},fetchUserLogin:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.signIn(Object(p.a)({},e));case 3:return r=t.sent,a=r.SSOToken,window.SSOToken="?SSOToken="+a,n(L.setIsAuth(!0)),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},fetchUserRegister:function(e){return Object(O.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.signUp(Object(p.a)({},e));case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},refresh:function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.refresh();case 3:return n=e.sent,r=n.SSOToken,window.SSOToken="?SSOToken="+r,t(L.setIsAuth(!0)),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.logout();case 3:return n=e.sent,R.SetAccessToken(""),t(L.setIsAuth(!1)),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}},D=L,F=n(21),P=n(48),N=n(23),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,M=[P.a],z=Object(F.e)(N.default,B(F.a.apply(void 0,M))),W=Object(m.a)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return w({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(){var e=Object(O.a)(b.a.mark((function e(t,n){var r,a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,a=n.props,e.next=3,z.dispatch(D.fetchUserLogin(t));case 3:s=e.sent,i=s.isAuth,r(!1),!0===i&&a.history.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),displayName:"LoginForm"})(E);function Z(){var e=Object(h.a)(["\n  height: 44px;\n  margin-top: 16px;\n"]);return Z=function(){return e},e}function H(){var e=Object(h.a)(["\n  text-decoration: none;\n  width: 100%;\n  outline: none;\n"]);return H=function(){return e},e}function V(){var e=Object(h.a)(["\n  height: 44px;\n  margin-top: 24px;\n"]);return V=function(){return e},e}function J(){var e=Object(h.a)(["\n  width: 100%;\n"]);return J=function(){return e},e}var X=Object(c.default)(f.Form)(J()),$=Object(c.default)(f.Button)(V()),q=Object(c.default)(i.b)(H()),G=Object(c.default)(f.Button)(Z()),K=function(e){var t=e.values,n=e.touched,a=e.errors,s=e.handleChange,i=e.handleSubmit,u=e.isSubmitting;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.Typography,{type:"h1",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(r.jsxs)(X,{onSubmit:i,children:[Object(r.jsx)(f.Input,{id:"name",placeholder:"\u0418\u043c\u044f",value:t.name,onChange:s,status:v("name",n,a),help:n.name?a.name:""}),Object(r.jsx)(f.Input,{name:"lastname",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:t.lastname,onChange:s,status:v("lastname",n,a),help:n.lastname?a.lastname:""}),Object(r.jsx)(f.Input,{id:"email",placeholder:"E-mail",value:t.email,onChange:s,status:v("email",n,a),help:n.email?a.email:""}),Object(r.jsx)(f.Input,{id:"password",type:"password",placeholder:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:t.password,onChange:s,status:v("password",n,a),help:n.password?a.password:""}),Object(r.jsx)(f.Input,{id:"password_2",type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:t.password_2,onChange:s,status:v("password_2",n,a),help:n.password_2?a.password_2:""}),Object(r.jsx)($,{type:"primary",disabled:u,onClick:i,fullWidth:!0,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(r.jsx)(q,{to:"/signin",children:Object(r.jsx)(G,{fullWidth:!0,type:"outline",children:"\u0412\u043e\u0439\u0442\u0438"})})]})},Q=Object(m.a)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",name:"",lastname:"",password:"",password_2:""}},validate:function(e){var t={};return w({isAuth:!1,values:e,errors:t}),t},handleSubmit:function(){var e=Object(O.a)(b.a.mark((function e(t,n){var r,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,a=n.props,e.next=3,z.dispatch(D.fetchUserRegister(t));case 3:s=e.sent,s.data&&a.history.push("/signin"),r(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),displayName:"RegisterForm"})(K),Y=n.p+"static/media/bg.067aa340.jpg";function ee(){var e=Object(h.a)(["\n    position: relative;\n    width: 100%;\n    height: 100vh;\n    background-image: url(",");\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return ee=function(){return e},e}function te(){var e=Object(h.a)(["\n    padding: 28px 32px 28px 32px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 360px;\n    height: auto;\n    min-height: 400px;\n"]);return te=function(){return e},e}var ne=Object(c.default)(f.Surface)(te()),re=c.default.div(ee(),Y),ae=function(e){return e.isAuth&&e.history.push("/"),Object(r.jsx)(re,{children:Object(r.jsxs)(ne,{children:[Object(r.jsx)(d.b,{exact:!0,path:"/signin",component:W}),Object(r.jsx)(d.b,{exact:!0,path:"/signup",component:Q})]})})},se=function(){return Object(r.jsx)("div",{children:"Home"})},ie=(n(92),Object(u.b)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.isAuth;return Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{exact:!0,path:["/signin","/signup"],render:function(e){return Object(r.jsx)(ae,Object(p.a)({isAuth:t},e))}}),Object(r.jsx)(d.b,{path:"/",render:function(){return t?window.redirectURL?window.location=window.redirectURL+window.SSOToken:Object(r.jsx)(se,{}):Object(r.jsx)(d.a,{to:"/signin"})}})]})}))),ue=window.location.search,ce=new URLSearchParams(ue).get("redirectURL");window.redirectURL=ce,z.dispatch(D.refresh()),s.a.render(Object(r.jsx)(u.a,{store:z,children:Object(r.jsx)(i.a,{basename:"/auth-client",children:Object(r.jsx)(c.ThemeProvider,{theme:l.a,children:Object(r.jsx)(ie,{})})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.f1f75ae6.chunk.js.map